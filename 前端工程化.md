# 						前端工程化

- ## webpack（以下所有重复代码都是上下连接）

  - ## Webpack的基本使用方法

    - ##### 创建文件夹

    ```
    //根目录
    webpack
    -webpack.config.js
    -src
    	--index.js
    	--index.html
    ```

    

    - ##### 终端下载

    ```bash
    npm install webpack webpack-cli --save-dev
    ```

    - ##### 配置webpack.config.js文件

    ```javascript
    const path=require('path')
    //导出文件
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        }
    }
    ```

    - ##### 配置package.json

    ```json
    {
      "name": "webpack",
      "version": "1.0.0",
      "description": "",
      //以便确保我们安装包是私有的(private),移除 main 入口。这可以防止意外发布你的代码。
      "private": true,
      //可用移除这行代码
      "main":"index.js",
      "dependencies": {},
      //此工程需要的依赖
      "devDependencies": {
        "jquery": "^3.5.1",
        "webpack": "^4.43.0",
        "webpack-cli": "^3.3.11"
      },
      //找到scripts,添加"dev":"webpack",执行时会自动找node_modules中webpack文件
      "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "dev": "webpack"
      },
      "keywords": [],
      "author": "",
      "license": "ISC"
    }
    ```

  - ### 配置webpack的自动打包功能

    - ##### 终端下载，安装自动打包工具

    ```bash
    npm install webpack-dev-server  -D 
    ```

    - ##### 修改package.json中scripts中的dev命令

    ```json
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "dev": "webpack-dev-server"
      },
    ```

    - ##### 将src文件夹下index.html中，script脚本地址，修改为"/输入文件根路径"

    - ##### 然后运行npm run dev 重新执行

    - 自动打开页面进行预览

    ```json
    "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
      //自动打开页面进行预览
        "dev": "webpack-dev-server --open --host 127.0.0.1 --port 8888"
      },
    ```

  - ##### 配置html-webpack-plugin生成预览页面

    - ##### 终端下载，安装自动打包工具

    ```bash
    npm install html-webpack-plugin  -D 
    ```

    - ##### 修改webpack.config.js文件头部区域，添加配置信息

    ```JavaScript
    //导入生成预览页面的插件，得到一个构造函数
    const HtmlWebpackPlugin=require('html-webpack-plugin')
    const htmlplugin=new HtmlWebpackPlugin({
      template:'./src/index.html',
      filename:'index.html'
    })
    ```

    - ##### 修改webpack.config.js文件中向外暴露的配置对象（同上是一个文件夹）

    ```javascript
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        },
      plugins:[htmlplugin]
    }
    ```

  - ### webpack加载器（loader）使用

    #### 1、打包样式

    - ##### 终端下载，安装自动打包工具

    ```bash
    npm install html-webpack-plugin  -D 
    ```

    - ##### 在webpack.config.js中进行配置

    ```javascript
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        },
      //使用外部导入的插件
      plugins:[htmlplugin],
      //使用加载器来处理不是JavaScript和Json文件，例如：css、scss、stylus
      module:{
        rules:[
          //test表示匹配的文件类型，use表示对应调用的loader
          //正则表达式 /  /
          //use数组中指定的loader的顺序是固定的
          //多个loader的调用顺序是：从后往前掉
          {test:/\.css$/,use:['style-loader','css-loader']}
        ]
      }
    }
    ```

    ###### 补充几种css预处理器：sass、less、postcss、stylus

    ###### [用法去区别](https://juejin.im/post/5c9b17cbf265da60c95b7c3a)

  - #### 配置postcss自动添加css兼容的前缀

    - ##### 终端下载

    ```bash
    npm install postcss-loader autoprefixer -D
    ```

    - ##### 在项目的根目录下创建 postcss.config.js文件，进行文件配置

    ```js
    module.exports = {
      plugins: [
        require('precss'),
        require('autoprefixer')
      ]
    }
    ```

    - ##### 在webpack.config.js中进行配置和使用

    ```javascript
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        },
      //使用外部导入的插件
      plugins:[htmlplugin],
      //使用加载器来处理不是JavaScript和Json文件，例如：css、scss、stylus
      module:{
        rules:[
          //test表示匹配的文件类型，use表示对应调用的loader
          //正则表达式 /  /
          //use数组中指定的loader的顺序是固定的
          //多个loader的调用顺序是：从后往前掉
          {test:/\.css$/,use:['style-loader','css-loader','postcss-loader']}
        ]
      }
    }
    ```

    #### 2、打包样式列表中的图片和文字

    - ##### 终端下载

    ```bash
    npm install url-loader file-loader -D
    ```

    - ##### 在webpack.config.js中进行配置和使用

    ```JavaScript
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        },
      //使用外部导入的插件
      plugins:[htmlplugin],
      //使用加载器来处理不是JavaScript和Json文件，例如：css、scss、stylus
      module:{
        rules:[
          //test表示匹配的文件类型，use表示对应调用的loader
          //正则表达式 /  /
          //use数组中指定的loader的顺序是固定的
          //多个loader的调用顺序是：从后往前掉
          {test:/\.css$/,use:['style-loader','css-loader','postcss-loader']},
          {
            test:/.\jpg|png|gif|bmp|ttf|eot|svg|woff|woff2$/,
            //其中`?`之后的loader的参数项 
           //limit用来指定图片的大小，单位是字节（byte）,只有小于limit的图片，才会被转为base64的图片
            use:'url-loader?limit=16940'
          }
        ]
      }
    }
    ```

    #### 3、打包处理高级JavaScript语法

    - ##### 终端下载

    ```bash
    安装babel转换器相关的包
    npm i babel-loader@7 @babel/core @babel/runtime -D
    安装babel语法插件的包
    npm i @babel/preset-env @babel/plugin-transform-runtime @babel/plugin-proposal-class-properties -D
    ```

    - ##### 创建babel.config.js配置文件

    ```JavaScript
    module.exports={
    	presets:['@babel/preset-env'],
    	plugins:["@babel/plugin-transform-runtime", 	"@babel/plugin-proposal-class-properties"]
    }
    ```

    - ##### 在webpack.config.js的module-->rules中添加loader

    ```JavaScript
    module.exports={
        //编译模式  developmen(开发模式)  production(发布模式)
        mode:'development',
        //输入文件路径
        entry:path.join(__dirname,'./src/index.js'),
        //输出文件的路径
        output:{
            path:path.join(__dirname,'./dist'),
            filename:'bundle.js'
        },
      //使用外部导入的插件
      plugins:[htmlplugin],
      //使用加载器来处理不是JavaScript和Json文件，例如：css、scss、stylus
      module:{
        rules:[
          //test表示匹配的文件类型，use表示对应调用的loader
          //正则表达式 /  /
          //use数组中指定的loader的顺序是固定的
          //多个loader的调用顺序是：从后往前掉
          {test:/\.css$/,use:['style-loader','css-loader','postcss-loader']},
          {
            test:/.\jpg|png|gif|bmp|ttf|eot|svg|woff|woff2$/,
            //其中`?`之后的loader的参数项 
           //limit用来指定图片的大小，单位是字节（byte）,只有小于limit的图片，才会被转为base64的图片
            use:'url-loader?limit=16940'
          },
          //exclude排除项，babel-loader不许处理node_modules中的js文件
          {test:/\.js$/,use:'babel-loader',exclude:'/node_modules/'}
        ]
      }
    }
    ```

    **webpack尽量使用render来渲染**

    ## webpack打包上线

    ##### 上线之前需要通过webpack将要上线的应用进行整体打包上线，通过配置package.json

    ```json
    {
      "name": "webpack",
      "version": "1.0.0",
      "description": "",
      "private": true,
      "main": "index.js",
      "dependencies": {},
      "devDependencies": {
        "webpack": "^4.43.0",
        "webpack-cli": "^3.3.11",
        "webpack-dev-server": "^3.11.0"
      },
      "scripts": {
        "test": "echo \"Error: no test specified\" && exit 1",
        "dev": "webpack-dev-server --open --host 127.0.0.1 --port 9999",
        //添加用于打包的命令 -p就是production
        "build":"webpack -p"
      },
      "keywords": [],
      "author": "",
      "license": "ISC"
    }
    
    ```

    